<div class="admin-container">

  <h2 class="titulo">Panel de Administraci√≥n</h2>

  <!-- FORMULARIO -->
  <form [formGroup]="formulario" (ngSubmit)="guardar()" class="form-card">

    <div class="fila">
      <div class="campo">
        <label>Nombre</label>
        <input formControlName="nombre" class="input" />
      </div>

      <div class="campo">
        <label>Precio</label>
        <input formControlName="precio" type="number" class="input" />
      </div>

      <div class="campo">
        <label>Stock</label>
        <input formControlName="stock" type="number" class="input" />
      </div>
    </div>

    <!-- MARCA -->
    <div class="campo">
      <label>Marca</label>
      <select formControlName="marca" class="input">
        <option value="Adidas">Adidas</option>
        <option value="Jordan 1">Jordan 1</option>
        <option value="Jordan Retro 11">Jordan Retro 11</option>
        <option value="Jordan Retro 4">Jordan Retro 4</option>
        <option value="Jordan Retro 3">Jordan Retro 3</option>
        <option value="Artistas">Artistas</option>
      </select>
    </div>

    <!-- TALLES DISPONIBLES -->
    <div class="campo">
      <label>Talles disponibles</label>

      <div class="talles-container">
        <label *ngFor="let t of tallesLista" class="talle-item">
          <input type="checkbox"
                 [value]="t"
                 (change)="toggleTalle(t, $event)" />
          {{ t }}
        </label>
      </div>
    </div>

    <div class="campo">
      <label>Imagen</label>
      <input type="file" (change)="onFileChange($event)" class="input" />
    </div>

    <div class="preview" *ngIf="imagenPrevia">
      <img [src]="imagenPrevia" />
    </div>

    <div class="acciones">
      <button class="btn guardar" type="submit">
        {{ editando ? 'Actualizar' : 'Crear' }} Producto
      </button>

      <button class="btn limpiar" type="button" (click)="reset()">
        Limpiar
      </button>
    </div>  
  </form>

  <!-- LISTA DE PRODUCTOS -->
  <h3 class="subtitulo">Productos existentes</h3>

  <div class="tabla-container">
    <table class="tabla">
      <thead>
        <tr>
          <th>ID</th>
          <th>Imagen</th>
          <th>Nombre</th>
          <th>Marca</th>
          <th>Talles</th>
          <th>Precio</th>
          <th>Stock</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let p of productos">
          <td>{{ p.id }}</td>

          <td>
            <img *ngIf="p.imagen"
                 [src]="'http://localhost/api_proyecto/public/uploads/' + p.imagen"
                 class="thumb" />
          </td>

          <td>{{ p.nombre }}</td>
          <td>{{ p.marca }}</td>

          <!-- üî• AHORA SE MUESTRAN BIEN LOS TALLES COMO TEXTO -->
          <td>{{ p.tallesDisponibles?.join(', ') }}</td>

          <td>$ {{ p.precio }}</td>
          <td>{{ p.stock }}</td>

          <td class="acciones-tabla">
            <button class="btn editar" (click)="editar(p)">Editar</button>
            <button class="btn eliminar" (click)="eliminar(p.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
